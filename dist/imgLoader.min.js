function imgLoader(t){function e(t){console.log(t);var e=new FileReader;e.onload=function(t){var e=new Image;e.onload=a,e.src=t.target.result},e.readAsDataURL(t.target.files[0])}function a(e){var a=e.target;h=document.createElement("canvas"),r=h.getContext("2d"),c=document.createElement("canvas"),g=c.getContext("2d");for(var i=0;i<t.templates.length;i++)n(a,t.templates[i]),h.width=0,h.height=0,c.width=0,c.height=0;t.callback&&t.callback(l)}function n(t,e){if(!l[e.id]){var a=Object.create(o);a.canvas=document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),e.displayElementId&&document.getElementById(e.displayElementId).appendChild(a.canvas),l[e.id]=a}var n=i(t.width,t.height,e.width,e.height),d=t;if(n.width<t.width/2){var m=t.width,s=t.height;do m=.5*m,s=.5*s,c.width=m,c.height=s,g.drawImage(d,0,0,m,s),d=h,h.width=m,h.height=s,r.drawImage(c,0,0,m,s);while(m>=2*n.width)}l[e.id].canvas.width=n.width,l[e.id].canvas.height=n.height,l[e.id].ctx.drawImage(d,0,0,n.width,n.height)}function i(t,e,a,n){if(t<=a&&e<=n)return{width:t,height:e};var i=t,d=e;return t>e?(i=a,d=a/t*e):(i=n/e*t,d=n),i>a&&(i=a,d=a/t*e),d>n&&(i=n/e*t,d=n),{width:i,height:d}}var d,h,r,c,g,l={};if(!t.inputId||!t.templates||t.templates.length<1)return console.error("You must specify the id of a file input element and at least one job template");d=document.getElementById(t.inputId),d.addEventListener("change",e);var o={getImageData:function(){return this.canvas.toDataURL("image/jpeg")}}}