function imgLoader(e){function t(e){console.log(e);var t=new FileReader;t.onload=function(e){var t=new Image;t.onload=a,t.src=e.target.result},t.readAsDataURL(e.target.files[0])}function a(t){for(var a=t.target,i=0;i<e.templates.length;i++)n(a,e.templates[i]);e.callback&&e.callback(r)}function n(e,t){if(!r[t.id]){var a=Object.create(c);a.canvas=document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),t.displayElementId&&document.getElementById(t.displayElementId).appendChild(a.canvas),r[t.id]=a}var n=i(e.width,e.height,t.width,t.height);r[t.id].canvas.width=n.width,r[t.id].canvas.height=n.height,r[t.id].ctx.drawImage(e,0,0,n.width,n.height)}function i(e,t,a,n){if(e<=a&&t<=n)return{width:e,height:t};var i=e,d=t;return e>t?(i=a,d=a/e*t):(i=n/t*e,d=n),i>a&&(i=a,d=a/e*t),d>n&&(i=n/t*e,d=n),{width:i,height:d}}var d,r={};if(!e.inputId||!e.templates||e.templates.length<1)return console.error("You must specify the id of a file input element and at least one job template");d=document.getElementById(e.inputId),d.addEventListener("change",t);var c={getImageData:function(){return this.canvas.toDataURL("image/jpeg")}}}